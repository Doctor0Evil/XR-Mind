# File: /mindsoft-ide/layout/mindsoft_ide_project_layout.cfg
# Purpose: System architecture + project structure for an IDE to scaffold
# Target: Mindsoft / NeuroGuardâ€“style neural-safety IDE (XR/BCI/web)

project MindsoftNeuroSafeIDE
{
  language-stack:
    - core: Rust, Go, TypeScript
    - plugins: C#, C++, Python, JS/TS
    - engines: Unreal, Unity, Godot, WebXR

  # ======================
  # 1. TOP-LEVEL DIRECTORIES
  # ======================
  folders:
    /ide-core                 # main desktop/web IDE host
    /neurosafety-engine       # scanners + SNN/ML detection
    /kernel-guard-agent       # optional OS/kernel-side agent
    /xr-bci-plugins           # Unreal/Unity/Godot/WebXR extensions
    /mindpattern-registry     # shared pattern/signature registry
    /compliance-policies      # legal + policy templates
    /incident-response        # packaging + escalation logic
    /smartcity-integration    # city-hub + kiosk support
    /docs                     # user + dev docs
    /examples                 # sample projects & blueprints
    /scripts                  # build, CI, deployment
    /config                   # global configs, feature flags

  # ======================
  # 2. IDE CORE (HOST APP)
  # ======================
  /ide-core:
    /frontend:
      - src/
        - AppShell.tsx          # main UI shell
        - EditorPane.tsx        # code editor
        - XRSceneInspector.tsx  # visual XR/BCI graph view
        - NeuroSafetyPanel.tsx  # risk heatmaps, flags
        - IncidentConsole.tsx   # incident list + logs
        - SettingsView.tsx
        - PluginManager.tsx
      - public/
      - package.json

    /backend:
      - cmd/ide-server/
        - main.go               # WebSocket/gRPC server
      - internal/api/
        - neuro_safety.go       # bridge to neurosafety-engine
        - incident_api.go
        - registry_api.go
      - internal/projects/
        - scaffolder.go         # creates new projects from templates
      - internal/plugins/
        - loader.go             # load IDE plugins

    /plugins:
      - mindsoft-plugin.json    # plugin manifest format
      - sdk/
        - ts/
        - py/
        - cs/

  # ======================
  # 3. NEURO-SAFETY ENGINE
  # ======================
  /neurosafety-engine:
    /core:
      - engine.rs               # orchestrates scans + ML/SNN
      - config.rs               # thresholds, weights, profiles
      - scoring.rs              # risk formulas (R, T, L, B)
    /static-analysis:
      - code_scan.rs            # AST/regex on source/bytecode
      - asset_scan.rs           # shaders, audio, haptics, XR scenes
      - policy_enforcer.rs      # neuro-CSP, VSG policy checks
    /runtime-analysis:
      - voice_monitor.rs        # live audio patterns
      - xr_stream_monitor.rs    # XR frame streams
      - bci_stream_monitor.rs   # EEG/EMG/EOG/eye-tracking feeds
    /ml-snn:
      - models/
        - snn_loop_detector.onnx
        - transformer_voice_model.onnx
      - trainer/
        - labeling_pipeline.py
        - federated_training.py

  # ======================
  # 4. KERNEL GUARD AGENT (OPTIONAL)
  # ======================
  /kernel-guard-agent:
    /ebpf:
      - xr_bci_hooks.c          # sys_open, execve, netfilter, /dev/neurobus0
    /agent:
      - main.rs                 # small daemon
      - telemetry.rs            # send events to IDE/neurosafety-engine

  # ======================
  # 5. XR / BCI ENGINE PLUGINS
  # ======================
  /xr-bci-plugins:
    /unity:
      - Editor/
        - MindsoftAnalyzer.cs   # preflight scans
      - Runtime/
        - NeuroGuardClient.cs   # runtime hooks
    /unreal:
      - Source/MindsoftPlugin/
        - MindsoftSubsystem.h/.cpp
    /godot:
      - addons/mindsoft/
        - mindsoft_plugin.gd
    /webxr:
      - src/
        - mindsoft-webxr.ts     # WebXR integration + CSP injection

  # ======================
  # 6. MIND-PATTERN REGISTRY
  # ======================
  /mindpattern-registry:
    - mindpattern.registry.yaml # domains, classes, detectors
    - blocklist.yaml            # sanitized pattern definitions
    - scrub-rules.yaml          # safe replacements / downgrades
    - tests/
      - registry_validation_test.rs

  # ======================
  # 7. COMPLIANCE & POLICY PACKS
  # ======================
  /compliance-policies:
    /eu-ai-act/
      - article5_prohibited.yaml
      - xr_subliminal_guidelines.md
    /neuro-rights/
      - cognitive_liberty.md
      - neurodata_privacy.yaml
    /platform-tos-templates/
      - no_mind_control_clause.md
      - contributor_agreement.md

  # ======================
  # 8. INCIDENT RESPONSE FABRIC
  # ======================
  /incident-response:
    - schema/
      - incident_record.json
      - evidence_bundle.json
    - packager/
      - packager.rs             # build incident bundles
    - router/
      - router.rs               # severity routing (SOC, T&S, LE)
    - ledger/
      - hyperledger_client.rs   # immutable anchoring

  # ======================
  # 9. SMART-CITY / ARCADE INTEGRATION
  # ======================
  /smartcity-integration:
    - nodes/
      - xr_arcade_node.yaml
      - bci_lab_node.yaml
      - city_xr_portal_node.yaml
    - edge-agents/
      - edge_snn_agent.rs
    - dashboards/
      - public_incident_dashboard.tsx

  # ======================
  # 10. DOCS & EXAMPLES
  # ======================
  /docs:
    - ARCHITECTURE.md
    - NEURO_SAFETY_SPEC.md
    - ENGINE_INTEGRATION_GUIDE.md
    - LEGAL_COMPLIANCE_GUIDE.md

  /examples:
    /safe-xr-game/
      - unity-project/
      - unreal-project/
    /bci-lab-demo/
      - data/
      - notebooks/

  # ======================
  # 11. CONFIG & SCRIPTS
  # ======================
  /config:
    - ide-config.yaml           # scaffold defaults
    - thresholds.yaml           # global risk thresholds
    - profiles/
      - personal_protection.yaml
      - org_strict_policy.yaml
      - smartcity_gateway.yaml

  /scripts:
    - bootstrap.sh              # create new workspace from this layout
    - ci-pipeline.yml           # GitHub/GitLab CI template
    - build_all.sh
    - run_dev_stack.sh
}